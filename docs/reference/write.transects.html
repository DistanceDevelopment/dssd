<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Writes transects to file — write.transects • dssd</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Writes transects to file — write.transects"><meta name="description" content="This function will write a set of transects to file, either as
a shapefile or gpx file, or it will write the transect coordinates (centre
points for point transects or end points for line transects) to a
comma-separated values 'csv' file or a text file 'txt' with tabular spacing
between columns. For line transects which have been split across geographical
features (such as islands or lakes) there will be two or more rows in the
csv / txt file with all rows having the same transect ID."><meta property="og:description" content="This function will write a set of transects to file, either as
a shapefile or gpx file, or it will write the transect coordinates (centre
points for point transects or end points for line transects) to a
comma-separated values 'csv' file or a text file 'txt' with tabular spacing
between columns. For line transects which have been split across geographical
features (such as islands or lakes) there will be two or more rows in the
csv / txt file with all rows having the same transect ID."><script type="text/javascript"> (function(c,l,a,r,i,t,y){ c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)}; t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;  y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})(window, document, "clarity","script", "m9tfz3zc93");</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dssd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/GettingStarted.html">Getting Started with dssd</a></li>
    <li><a class="dropdown-item" href="../articles/MultiStrataVignette.html">Multiple Strata in dssd</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/distancesamp" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DistanceDevelopment/dssd/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Writes transects to file</h1>
      <small class="dont-index">Source: <a href="https://github.com/DistanceDevelopment/dssd/blob/HEAD/R/write.transects.R" class="external-link"><code>R/write.transects.R</code></a></small>
      <div class="d-none name"><code>write.transects.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function will write a set of transects to file, either as
a shapefile or gpx file, or it will write the transect coordinates (centre
points for point transects or end points for line transects) to a
comma-separated values 'csv' file or a text file 'txt' with tabular spacing
between columns. For line transects which have been split across geographical
features (such as islands or lakes) there will be two or more rows in the
csv / txt file with all rows having the same transect ID.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">write.transects</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">dsn</span>,</span>
<span>  layer <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dataset.options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  proj4string <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>an object inheriting from class Transect. Alternatively, for
all file types except gpx an sf spatial object can be supplied.</p></dd>


<dt id="arg-dsn">dsn<a class="anchor" aria-label="anchor" href="#arg-dsn"></a></dt>
<dd><p>the data source name, currently a filename with a 'shp'
'csv', 'txt' or 'gpx' extension.</p></dd>


<dt id="arg-layer">layer<a class="anchor" aria-label="anchor" href="#arg-layer"></a></dt>
<dd><p>a character vector specifying the layer name, only
required for gpx files.</p></dd>


<dt id="arg-dataset-options">dataset.options<a class="anchor" aria-label="anchor" href="#arg-dataset-options"></a></dt>
<dd><p>a character vector of options, which vary by
driver, and should be treated as experimental. Used to specify
"GPX_USE_EXTENSIONS=yes" for writing gpx files.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>whether or not existing files should be overwritten.
Only applicable when writing to gpx files.</p></dd>


<dt id="arg-proj-string">proj4string<a class="anchor" aria-label="anchor" href="#arg-proj-string"></a></dt>
<dd><p>The projection you wish the coordinates of the
output file to be in. Note, when writing to gpx file the transect
coordinates must be in latitude and longitude.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>invisibly the Transect object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>To write the transects to file usually only the dsn is needed with
a 'shp', 'csv' or 'txt' file extension. To write a gpx file you need to
specify the dsn and a projection so allow the coordinates to be transformed.
back into latitude and longitude.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Laura Marshall</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Note that for CRAN testing purposes all files written in example code must</span></span></span>
<span class="r-in"><span><span class="co"># be written to a temporary directory, to view this location type tempdir().</span></span></span>
<span class="r-in"><span><span class="co"># It is however advised that you replace the tempdir() commands in the code</span></span></span>
<span class="r-in"><span><span class="co"># below to a more easily accessible directory to which the files will be</span></span></span>
<span class="r-in"><span><span class="co"># written.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make the default design in the default study area</span></span></span>
<span class="r-in"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="make.design.html">make.design</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">transects</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate.transects-methods.html">generate.transects</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">write.transects</span><span class="op">(</span><span class="va">transects</span>, dsn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="st">"transects.shp"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> writing: substituting ENGCRS["Undefined Cartesian SRS with unknown unit"] for missing CRS</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Writing layer `transects' to data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `C:\Users\erexs\AppData\Local\Temp\Rtmp69Kqts/transects.shp' using driver `ESRI Shapefile'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Writing 20 features with 2 fields and geometry type Line String.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Writing csv file example</span></span></span>
<span class="r-in"><span><span class="fu">write.transects</span><span class="op">(</span><span class="va">transects</span>, dsn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="st">"transects.csv"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Writing txt file example</span></span></span>
<span class="r-in"><span><span class="fu">write.transects</span><span class="op">(</span><span class="va">transects</span>, dsn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="st">"transects.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Writing gpx file example - must project transect coords into lat/lon</span></span></span>
<span class="r-in"><span><span class="co">#Load the unprojected shapefile</span></span></span>
<span class="r-in"><span><span class="va">shapefile.name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"TentsmuirUnproj.shp"</span>, package <span class="op">=</span> <span class="st">"dssd"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sf.shape</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">read_sf</a></span><span class="op">(</span><span class="va">shapefile.name</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Check current coordinate reference system</span></span></span>
<span class="r-in"><span><span class="va">orig.crs</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">sf.shape</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Define a European Albers Equal Area projection</span></span></span>
<span class="r-in"><span><span class="va">proj4string</span> <span class="op">&lt;-</span> <span class="st">"+proj=aea +lat_1=56 +lat_2=62 +lat_0=50 +lon_0=-3 +x_0=0</span></span></span>
<span class="r-in"><span><span class="st">                +y_0=0 +ellps=intl +units=m"</span></span></span>
<span class="r-in"><span><span class="co"># Project the study area on to a flat plane</span></span></span>
<span class="r-in"><span><span class="va">projected.shape</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">sf.shape</span>, crs <span class="op">=</span> <span class="va">proj4string</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Create the survey region in dssd</span></span></span>
<span class="r-in"><span><span class="va">region.tm</span> <span class="op">&lt;-</span> <span class="fu"><a href="make.region.html">make.region</a></span><span class="op">(</span>region.name <span class="op">=</span> <span class="st">"Tentsmuir"</span>,</span></span>
<span class="r-in"><span>                         strata.name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Main Area"</span>, <span class="st">"Morton Lochs"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                         shape <span class="op">=</span> <span class="va">projected.shape</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="make.design.html">make.design</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">region.tm</span>,</span></span>
<span class="r-in"><span>                      transect.type <span class="op">=</span> <span class="st">"line"</span>,</span></span>
<span class="r-in"><span>                      design <span class="op">=</span> <span class="st">"systematic"</span>,</span></span>
<span class="r-in"><span>                      samplers <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                      design.angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">survey</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate.transects-methods.html">generate.transects</a></span><span class="op">(</span><span class="va">design</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">region.tm</span>, <span class="va">survey</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="write.transects-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">write.transects</span><span class="op">(</span><span class="va">survey</span>,</span></span>
<span class="r-in"><span>                dsn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="st">"transects.gpx"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                layer <span class="op">=</span> <span class="st">"lines"</span>,</span></span>
<span class="r-in"><span>                proj4string <span class="op">=</span> <span class="va">orig.crs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Writing layer `lines' to data source </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   `C:\Users\erexs\AppData\Local\Temp\Rtmp69Kqts/transects.gpx' using driver `GPX'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Writing 21 features with 0 fields and geometry type Multi Line String.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>We improve our site and software support by using Microsoft Clarity to see <br> how you use our website. By using our site, you agree that we and Microsoft <br> can collect and use this data. Clarity is GDPR compliant.</p>
</div>

<div class="pkgdown-footer-right">
  <p>If you wish to donate to development and maintenance, please <a href="mailto:distance@st-andrews.ac.uk">email us</a>.</p>
</div>

    </footer></div>





  </body></html>

